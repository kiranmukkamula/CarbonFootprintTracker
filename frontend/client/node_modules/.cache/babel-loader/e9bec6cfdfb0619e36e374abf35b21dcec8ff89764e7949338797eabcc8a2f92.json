{"ast":null,"code":"var _jsxFileName = \"C:\\\\react\\\\code\\\\frontend\\\\client\\\\src\\\\pages\\\\Tracker.js\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useState } from \"react\";\n// import {\n//   LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid, ResponsiveContainer\n// } from \"recharts\";\n// import { useNavigate } from \"react-router-dom\";\n\n// export default function Tracker({ onLogout }) {\n//   const [entries, setEntries] = useState([]);\n//   const [activity, setActivity] = useState(\"\");\n//   const [emission, setEmission] = useState(\"\");\n//   const [riskInfo, setRiskInfo] = useState(null);\n//   const navigate = useNavigate();\n\n//   const user = JSON.parse(localStorage.getItem(\"user\"));\n\n//   useEffect(() => {\n//     if (!user?.id) return;\n\n//     fetch(`http://localhost:5000/api/entries?userId=${user.id}`)\n//       .then((res) => res.json())\n//       .then((data) => setEntries(data));\n//   }, [user?.id]);\n\n//   const getRiskCategory = (emission) => {\n//     if (emission < 5) {\n//       return { category: \"Safe Usage\", color: \"green\", advice: \"You're doing great! Keep it up.\" };\n//     } else if (emission < 10) {\n//       return { category: \"Medium Risk Usage\", color: \"orange\", advice: \"Try reducing travel or power consumption.\" };\n//     } else {\n//       return { category: \"Dangerous Usage\", color: \"red\", advice: \"Consider using public transport or reducing appliance usage.\" };\n//     }\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     if (!activity || !emission || !user?.id) return;\n\n//     const emissionVal = parseFloat(emission);\n\n//     const res = await fetch(\"http://localhost:5000/api/entries\", {\n//       method: \"POST\",\n//       headers: { \"Content-Type\": \"application/json\" },\n//       body: JSON.stringify({ activity, emission: emissionVal, userId: user.id }),\n//     });\n\n//     const newEntry = await res.json();\n//     setEntries([newEntry, ...entries]);\n//     setActivity(\"\");\n//     setEmission(\"\");\n\n//     const risk = getRiskCategory(emissionVal);\n//     setRiskInfo(risk);\n//   };\n\n//   const handleLogout = () => {\n//     localStorage.removeItem(\"user\");\n//     if (onLogout) onLogout();\n//     navigate(\"/login\");\n//   };\n\n//   const chartData = entries\n//     .slice()\n//     .reverse()\n//     .map((e) => ({\n//       date: new Date(e.date).toLocaleDateString(),\n//       emission: Number(e.emission),\n//     }));\n\n//   return (\n//     <div className=\"relative max-w-2xl mx-auto mt-10 p-6 border border-gray-300 rounded-xl bg-white shadow-md\">\n//       {/* Top bar */}\n//       <div className=\"flex justify-between items-center mb-6\">\n//         <h1 className=\"text-2xl font-bold text-green-700\">Carbon Footprint Tracker</h1>\n//         <button onClick={handleLogout} className=\"bg-blue-600 text-white px-4 py-1 rounded-lg hover:bg-blue-500\">\n//           Logout\n//         </button>\n//       </div>\n\n//       {/* Form */}\n//       <form onSubmit={handleSubmit} className=\"space-x-2 mb-6\">\n//         <input\n//           className=\"border rounded-lg px-2 py-1\"\n//           value={activity}\n//           onChange={(e) => setActivity(e.target.value)}\n//           placeholder=\"Activity\"\n//         />\n//         <input\n//           className=\"border rounded-lg px-2 py-1\"\n//           value={emission}\n//           onChange={(e) => setEmission(e.target.value)}\n//           type=\"number\"\n//           placeholder=\"Emission (kg CO₂e)\"\n//           min=\"0\"\n//         />\n//         <button type=\"submit\" className=\"bg-green-600 text-white px-4 py-1 rounded-lg hover:bg-green-500\">\n//           Add Entry\n//         </button>\n//       </form>\n\n//       {/* Risk Box */}\n//       {riskInfo && (\n//         <div className=\"absolute top-2 left-2 right-2 bg-white border-l-8 rounded-md p-4 shadow z-20\"\n//              style={{ borderColor: riskInfo.color }}>\n//           <div className=\"flex justify-between\">\n//             <h2 className={`text-lg font-semibold text-${riskInfo.color}-700`}>\n//               {riskInfo.category}\n//             </h2>\n//             <button onClick={() => setRiskInfo(null)} className=\"text-gray-600 hover:text-black\">&times;</button>\n//           </div>\n//           <p className=\"text-sm mt-1\">{riskInfo.advice}</p>\n//         </div>\n//       )}\n\n//       {/* Entries */}\n//       <h2 className=\"text-xl font-semibold text-gray-800 mb-2 mt-8\">Entries</h2>\n//       <ul className=\"space-y-2\">\n//         {entries.length === 0 && <li>No entries yet.</li>}\n//         {entries.map((entry) => (\n//           <li key={entry._id} className=\"border-b pb-2 text-sm\">\n//             <strong>{new Date(entry.date).toLocaleDateString()}</strong>: {entry.activity} — {entry.emission} kg CO₂e\n//           </li>\n//         ))}\n//       </ul>\n\n//       {/* Chart */}\n//       <h3 className=\"text-lg font-semibold text-gray-900 mt-10 mb-2\">Emissions Over Time</h3>\n//       <ResponsiveContainer width=\"100%\" height={300}>\n//         <LineChart data={chartData}>\n//           <CartesianGrid strokeDasharray=\"3 3\" />\n//           <XAxis dataKey=\"date\" />\n//           <YAxis label={{ value: \"kg CO₂e\", angle: -90, position: \"insideLeft\" }} />\n//           <Tooltip />\n//           <Line type=\"monotone\" dataKey=\"emission\" stroke=\"#10b981\" />\n//         </LineChart>\n//       </ResponsiveContainer>\n//     </div>\n//   );\n// }\nimport React, { useEffect, useState } from \"react\";\nimport { LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid, ResponsiveContainer } from \"recharts\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Tracker({\n  onLogout\n}) {\n  _s();\n  const [entries, setEntries] = useState([]);\n  const [activity, setActivity] = useState(\"\");\n  const [emission, setEmission] = useState(\"\");\n  const [riskInfo, setRiskInfo] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetch(\"http://localhost:5000/api/entries\").then(res => res.json()).then(data => setEntries(data));\n  }, []);\n  const getRiskCategory = emission => {\n    if (emission < 5) {\n      return {\n        category: \"✅ Safe Usage\",\n        color: \"green\",\n        advice: \"You're doing great! Keep it up.\",\n        twColor: \"green-500\"\n      };\n    } else if (emission < 10) {\n      return {\n        category: \"⚠️ Medium Risk Usage\",\n        color: \"amber\",\n        advice: \"Try reducing travel or power consumption.\",\n        twColor: \"amber-500\"\n      };\n    } else {\n      return {\n        category: \"🚨 Dangerous Usage\",\n        color: \"rose\",\n        advice: \"Consider using public transport or reducing appliance usage.\",\n        twColor: \"rose-500\"\n      };\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!activity || !emission) return;\n    const emissionVal = parseFloat(emission);\n    const res = await fetch(\"http://localhost:5000/api/entries\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        activity,\n        emission: emissionVal\n      })\n    });\n    const newEntry = await res.json();\n    setEntries([newEntry, ...entries]);\n    setActivity(\"\");\n    setEmission(\"\");\n    const risk = getRiskCategory(emissionVal);\n    setRiskInfo(risk);\n  };\n  const handleLogout = () => {\n    localStorage.removeItem(\"user\");\n    if (onLogout) onLogout();\n    navigate(\"/login\");\n  };\n  const chartData = entries.slice().reverse().map(e => ({\n    date: new Date(e.date).toLocaleDateString(),\n    emission: Number(e.emission)\n  }));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-white px-6 py-10\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8 relative\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-3xl font-bold text-green-700\",\n          children: \"Carbon Footprint Tracker\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          className: \"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"flex flex-wrap gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"flex-1 border border-gray-300 rounded-lg px-4 py-2\",\n          value: activity,\n          onChange: e => setActivity(e.target.value),\n          placeholder: \"Activity\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"w-40 border border-gray-300 rounded-lg px-4 py-2\",\n          value: emission,\n          onChange: e => setEmission(e.target.value),\n          type: \"number\",\n          placeholder: \"Emission (kg CO2e)\",\n          min: \"0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg\",\n          children: \"Add Entry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), riskInfo && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `bg-${riskInfo.twColor} text-white p-4 rounded-lg mb-6`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold\",\n            children: riskInfo.category\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setRiskInfo(null),\n            className: \"text-white text-xl\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm mt-1\",\n          children: riskInfo.advice\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-xl font-semibold text-gray-800 mb-3\",\n        children: \"Activity Entries\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"space-y-2 mb-8\",\n        children: [entries.map(entry => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"bg-gray-100 px-4 py-2 rounded-lg text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: new Date(entry.date).toLocaleDateString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this), \": \", entry.activity, \" \\u2014 \", entry.emission, \" kg CO\", /*#__PURE__*/_jsxDEV(\"sub\", {\n            children: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 118\n          }, this), \"e\"]\n        }, entry._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }, this)), entries.length === 0 && /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"text-gray-500 text-sm\",\n          children: \"No entries yet.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl text-gray-800 font-semibold mb-2\",\n        children: \"Emissions Over Time\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full h-72\",\n        children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n          width: \"100%\",\n          height: \"100%\",\n          children: /*#__PURE__*/_jsxDEV(LineChart, {\n            data: chartData,\n            children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n              strokeDasharray: \"3 3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n              dataKey: \"date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n              label: {\n                value: \"kg CO2e\",\n                angle: -90,\n                position: \"insideLeft\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Line, {\n              type: \"monotone\",\n              dataKey: \"emission\",\n              stroke: \"#10b981\",\n              strokeWidth: 2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 5\n  }, this);\n}\n_s(Tracker, \"a/TYrMJfwQ/TCDJd5oD02rXq+2M=\", false, function () {\n  return [useNavigate];\n});\n_c = Tracker;\nvar _c;\n$RefreshReg$(_c, \"Tracker\");","map":{"version":3,"names":["React","useEffect","useState","LineChart","Line","XAxis","YAxis","Tooltip","CartesianGrid","ResponsiveContainer","useNavigate","jsxDEV","_jsxDEV","Tracker","onLogout","_s","entries","setEntries","activity","setActivity","emission","setEmission","riskInfo","setRiskInfo","navigate","fetch","then","res","json","data","getRiskCategory","category","color","advice","twColor","handleSubmit","e","preventDefault","emissionVal","parseFloat","method","headers","body","JSON","stringify","newEntry","risk","handleLogout","localStorage","removeItem","chartData","slice","reverse","map","date","Date","toLocaleDateString","Number","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onSubmit","value","onChange","target","placeholder","type","min","entry","_id","length","width","height","strokeDasharray","dataKey","label","angle","position","stroke","strokeWidth","_c","$RefreshReg$"],"sources":["C:/react/code/frontend/client/src/pages/Tracker.js"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\n// import {\r\n//   LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid, ResponsiveContainer\r\n// } from \"recharts\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n\r\n// export default function Tracker({ onLogout }) {\r\n//   const [entries, setEntries] = useState([]);\r\n//   const [activity, setActivity] = useState(\"\");\r\n//   const [emission, setEmission] = useState(\"\");\r\n//   const [riskInfo, setRiskInfo] = useState(null);\r\n//   const navigate = useNavigate();\r\n\r\n//   const user = JSON.parse(localStorage.getItem(\"user\"));\r\n\r\n//   useEffect(() => {\r\n//     if (!user?.id) return;\r\n\r\n//     fetch(`http://localhost:5000/api/entries?userId=${user.id}`)\r\n//       .then((res) => res.json())\r\n//       .then((data) => setEntries(data));\r\n//   }, [user?.id]);\r\n\r\n//   const getRiskCategory = (emission) => {\r\n//     if (emission < 5) {\r\n//       return { category: \"Safe Usage\", color: \"green\", advice: \"You're doing great! Keep it up.\" };\r\n//     } else if (emission < 10) {\r\n//       return { category: \"Medium Risk Usage\", color: \"orange\", advice: \"Try reducing travel or power consumption.\" };\r\n//     } else {\r\n//       return { category: \"Dangerous Usage\", color: \"red\", advice: \"Consider using public transport or reducing appliance usage.\" };\r\n//     }\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     if (!activity || !emission || !user?.id) return;\r\n\r\n//     const emissionVal = parseFloat(emission);\r\n\r\n//     const res = await fetch(\"http://localhost:5000/api/entries\", {\r\n//       method: \"POST\",\r\n//       headers: { \"Content-Type\": \"application/json\" },\r\n//       body: JSON.stringify({ activity, emission: emissionVal, userId: user.id }),\r\n//     });\r\n\r\n//     const newEntry = await res.json();\r\n//     setEntries([newEntry, ...entries]);\r\n//     setActivity(\"\");\r\n//     setEmission(\"\");\r\n\r\n//     const risk = getRiskCategory(emissionVal);\r\n//     setRiskInfo(risk);\r\n//   };\r\n\r\n//   const handleLogout = () => {\r\n//     localStorage.removeItem(\"user\");\r\n//     if (onLogout) onLogout();\r\n//     navigate(\"/login\");\r\n//   };\r\n\r\n//   const chartData = entries\r\n//     .slice()\r\n//     .reverse()\r\n//     .map((e) => ({\r\n//       date: new Date(e.date).toLocaleDateString(),\r\n//       emission: Number(e.emission),\r\n//     }));\r\n\r\n//   return (\r\n//     <div className=\"relative max-w-2xl mx-auto mt-10 p-6 border border-gray-300 rounded-xl bg-white shadow-md\">\r\n//       {/* Top bar */}\r\n//       <div className=\"flex justify-between items-center mb-6\">\r\n//         <h1 className=\"text-2xl font-bold text-green-700\">Carbon Footprint Tracker</h1>\r\n//         <button onClick={handleLogout} className=\"bg-blue-600 text-white px-4 py-1 rounded-lg hover:bg-blue-500\">\r\n//           Logout\r\n//         </button>\r\n//       </div>\r\n\r\n//       {/* Form */}\r\n//       <form onSubmit={handleSubmit} className=\"space-x-2 mb-6\">\r\n//         <input\r\n//           className=\"border rounded-lg px-2 py-1\"\r\n//           value={activity}\r\n//           onChange={(e) => setActivity(e.target.value)}\r\n//           placeholder=\"Activity\"\r\n//         />\r\n//         <input\r\n//           className=\"border rounded-lg px-2 py-1\"\r\n//           value={emission}\r\n//           onChange={(e) => setEmission(e.target.value)}\r\n//           type=\"number\"\r\n//           placeholder=\"Emission (kg CO₂e)\"\r\n//           min=\"0\"\r\n//         />\r\n//         <button type=\"submit\" className=\"bg-green-600 text-white px-4 py-1 rounded-lg hover:bg-green-500\">\r\n//           Add Entry\r\n//         </button>\r\n//       </form>\r\n\r\n//       {/* Risk Box */}\r\n//       {riskInfo && (\r\n//         <div className=\"absolute top-2 left-2 right-2 bg-white border-l-8 rounded-md p-4 shadow z-20\"\r\n//              style={{ borderColor: riskInfo.color }}>\r\n//           <div className=\"flex justify-between\">\r\n//             <h2 className={`text-lg font-semibold text-${riskInfo.color}-700`}>\r\n//               {riskInfo.category}\r\n//             </h2>\r\n//             <button onClick={() => setRiskInfo(null)} className=\"text-gray-600 hover:text-black\">&times;</button>\r\n//           </div>\r\n//           <p className=\"text-sm mt-1\">{riskInfo.advice}</p>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Entries */}\r\n//       <h2 className=\"text-xl font-semibold text-gray-800 mb-2 mt-8\">Entries</h2>\r\n//       <ul className=\"space-y-2\">\r\n//         {entries.length === 0 && <li>No entries yet.</li>}\r\n//         {entries.map((entry) => (\r\n//           <li key={entry._id} className=\"border-b pb-2 text-sm\">\r\n//             <strong>{new Date(entry.date).toLocaleDateString()}</strong>: {entry.activity} — {entry.emission} kg CO₂e\r\n//           </li>\r\n//         ))}\r\n//       </ul>\r\n\r\n//       {/* Chart */}\r\n//       <h3 className=\"text-lg font-semibold text-gray-900 mt-10 mb-2\">Emissions Over Time</h3>\r\n//       <ResponsiveContainer width=\"100%\" height={300}>\r\n//         <LineChart data={chartData}>\r\n//           <CartesianGrid strokeDasharray=\"3 3\" />\r\n//           <XAxis dataKey=\"date\" />\r\n//           <YAxis label={{ value: \"kg CO₂e\", angle: -90, position: \"insideLeft\" }} />\r\n//           <Tooltip />\r\n//           <Line type=\"monotone\" dataKey=\"emission\" stroke=\"#10b981\" />\r\n//         </LineChart>\r\n//       </ResponsiveContainer>\r\n//     </div>\r\n//   );\r\n// }\r\nimport React, { useEffect, useState } from \"react\";\r\nimport {\r\n  LineChart, Line, XAxis, YAxis, Tooltip, CartesianGrid, ResponsiveContainer\r\n} from \"recharts\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Tracker({ onLogout }) {\r\n  const [entries, setEntries] = useState([]);\r\n  const [activity, setActivity] = useState(\"\");\r\n  const [emission, setEmission] = useState(\"\");\r\n  const [riskInfo, setRiskInfo] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost:5000/api/entries\")\r\n      .then((res) => res.json())\r\n      .then((data) => setEntries(data));\r\n  }, []);\r\n\r\n  const getRiskCategory = (emission) => {\r\n    if (emission < 5) {\r\n      return {\r\n        category: \"✅ Safe Usage\",\r\n        color: \"green\",\r\n        advice: \"You're doing great! Keep it up.\",\r\n        twColor: \"green-500\"\r\n      };\r\n    } else if (emission < 10) {\r\n      return {\r\n        category: \"⚠️ Medium Risk Usage\",\r\n        color: \"amber\",\r\n        advice: \"Try reducing travel or power consumption.\",\r\n        twColor: \"amber-500\"\r\n      };\r\n    } else {\r\n      return {\r\n        category: \"🚨 Dangerous Usage\",\r\n        color: \"rose\",\r\n        advice: \"Consider using public transport or reducing appliance usage.\",\r\n        twColor: \"rose-500\"\r\n      };\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!activity || !emission) return;\r\n    const emissionVal = parseFloat(emission);\r\n\r\n    const res = await fetch(\"http://localhost:5000/api/entries\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ activity, emission: emissionVal }),\r\n    });\r\n    const newEntry = await res.json();\r\n    setEntries([newEntry, ...entries]);\r\n    setActivity(\"\");\r\n    setEmission(\"\");\r\n\r\n    const risk = getRiskCategory(emissionVal);\r\n    setRiskInfo(risk);\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"user\");\r\n    if (onLogout) onLogout();\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const chartData = entries\r\n    .slice()\r\n    .reverse()\r\n    .map((e) => ({\r\n      date: new Date(e.date).toLocaleDateString(),\r\n      emission: Number(e.emission),\r\n    }));\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-white px-6 py-10\">\r\n      <div className=\"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8 relative\">\r\n        \r\n        {/* Header */}\r\n        <div className=\"flex justify-between items-center mb-6\">\r\n          <h1 className=\"text-3xl font-bold text-green-700\">Carbon Footprint Tracker</h1>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg transition\"\r\n          >\r\n            Logout\r\n          </button>\r\n        </div>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"flex flex-wrap gap-4 mb-6\">\r\n          <input\r\n            className=\"flex-1 border border-gray-300 rounded-lg px-4 py-2\"\r\n            value={activity}\r\n            onChange={(e) => setActivity(e.target.value)}\r\n            placeholder=\"Activity\"\r\n          />\r\n          <input\r\n            className=\"w-40 border border-gray-300 rounded-lg px-4 py-2\"\r\n            value={emission}\r\n            onChange={(e) => setEmission(e.target.value)}\r\n            type=\"number\"\r\n            placeholder=\"Emission (kg CO2e)\"\r\n            min=\"0\"\r\n          />\r\n          <button\r\n            type=\"submit\"\r\n            className=\"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg\"\r\n          >\r\n            Add Entry\r\n          </button>\r\n        </form>\r\n\r\n        {/* Risk Popup */}\r\n        {riskInfo && (\r\n          <div className={`bg-${riskInfo.twColor} text-white p-4 rounded-lg mb-6`}>\r\n            <div className=\"flex justify-between items-center\">\r\n              <h2 className=\"text-lg font-semibold\">{riskInfo.category}</h2>\r\n              <button onClick={() => setRiskInfo(null)} className=\"text-white text-xl\">&times;</button>\r\n            </div>\r\n            <p className=\"text-sm mt-1\">{riskInfo.advice}</p>\r\n          </div>\r\n        )}\r\n\r\n        {/* Entries */}\r\n        <h2 className=\"text-xl font-semibold text-gray-800 mb-3\">Activity Entries</h2>\r\n        <ul className=\"space-y-2 mb-8\">\r\n          {entries.map((entry) => (\r\n            <li\r\n              key={entry._id}\r\n              className=\"bg-gray-100 px-4 py-2 rounded-lg text-sm\"\r\n            >\r\n              <strong>{new Date(entry.date).toLocaleDateString()}</strong>: {entry.activity} — {entry.emission} kg CO<sub>2</sub>e\r\n            </li>\r\n          ))}\r\n          {entries.length === 0 && (\r\n            <li className=\"text-gray-500 text-sm\">No entries yet.</li>\r\n          )}\r\n        </ul>\r\n\r\n        {/* Chart */}\r\n        <h3 className=\"text-xl text-gray-800 font-semibold mb-2\">Emissions Over Time</h3>\r\n        <div className=\"w-full h-72\">\r\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n            <LineChart data={chartData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" />\r\n              <XAxis dataKey=\"date\" />\r\n              <YAxis label={{ value: \"kg CO2e\", angle: -90, position: \"insideLeft\" }} />\r\n              <Tooltip />\r\n              <Line type=\"monotone\" dataKey=\"emission\" stroke=\"#10b981\" strokeWidth={2} />\r\n            </LineChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}